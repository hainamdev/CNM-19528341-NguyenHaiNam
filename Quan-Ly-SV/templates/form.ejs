<!DOCTYPE html>
<html>
    <head>
        <title>Nguyen Hai Nam - KT giua ki</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    </head>
    <body>
        <div class="container wrapper">
                <center><h1>Thêm Sinh Vien</h1></center>
                <form action="/" method="post" enctype="multipart/form-data" id="form">
                    <small class="text-danger"><%= error%></small>
                    <input type="text" placeholder="Nhập ma sinh vien" class="form-control" id="ma" name="maSinhVien" />
                    <small class="text-danger" id="lbma"></small>
                    <input type="text" placeholder="Nhập tên" class="form-control" id="ten" name="tenSinhVien" />
                    <small class="text-danger" id="lbten"></small>
                    <input type="date" placeholder="Nhập ngày sinh" class="form-control" id="ngay" name="ngaySinh" />
                    <small class="text-danger" id="lbngay"></small>
                    <br/>
                    <input type="submit"  value="Thêm thông tin sinh viên" class="btn btn-success"/>
                </form>
        </div>
        <script>
            $(document).ready(()=>{
                const checkMa = (() => { 
                    const ma = $("#ma");
                    const lbma = $("#lbma");
                    if(ma.val() == ""){
                        lbma.html("Mã không được để trống");
                        return false;
                    }
                    lbma.html("");
                    return true;
                });
                $("#ma").blur(checkMa);

                const checkTen = (() => { 
                    const ten = $("#ten");
                    const lbten = $("#lbten");
                    if(ten.val() == ""){
                        lbten.html("Ten không được để trống");
                        return false;
                    }
                    lbten.html("");
                    return true;
                });
                $("#ten").blur(checkTen);

                const checkNgay = (() => { 
                    const ngay = $("#ngay");
                    const lbngay = $("#lbngay");
                    const re = /^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;
                    if(ngay.val() == ""){
                        lbngay.html("Ngay không được để trống");
                        return false;
                    }else if(re.test(ngay.val())){
                        lbngay.html("Ngay phải theo định dạng: DD/MM/YYYY");
                        return false;
                    }
                    lbngay.html("");
                    return true;
                });
                $("#ngay").blur(checkNgay);

                $("#form").submit((e) =>{
                    if(checkMa() && checkTen() && checkNgay()){
                        $(this).submit();
                    }
                    e.preventDefault();
                });
            })
        </script>
    </body>
</html>